AC_PREREQ(2.52)
AC_INIT(matchbox-desktop, 2.0, http://o-hand.com)
AC_CONFIG_SRCDIR(libtaku/taku-tile.c)
AM_INIT_AUTOMAKE(AC_PACKAGE_NAME, AC_PACKAGE_VERSION)
AM_CONFIG_HEADER(config.h)

AM_DISABLE_STATIC
AC_PROG_CPP
AC_PROG_CC
AC_PROG_RANLIB

AC_CHECK_HEADERS([sys/inotify.h], inotify_support=yes, inotify_support=no)
AM_CONDITIONAL(HAVE_INOTIFY, [test "$inotify_support" = "yes"])

PKG_CHECK_MODULES(GTK, gtk+-2.0)

AC_ARG_ENABLE(startup_notification,
        AC_HELP_STRING([--enable-startup-notification], [enable startup notification support]),
        enable_startup_notification=$enableval, enable_startup_notification=yes)

if test x$enable_startup_notification != xno; then
  PKG_CHECK_MODULES(SN, libstartup-notification-1.0, ,
    AC_MSG_ERROR([*** Required Startup Notification library not installed ***]))
  AC_DEFINE(USE_LIBSN, [1], [Has Startup Notification Support])
fi

AC_ARG_ENABLE(standalone,
        AC_HELP_STRING([--enable-standalone], [run in a window, not as the desktop]),
        enable_standalone=$enableval, enable_standalone=no)
if test x$enable_standalone != xno; then
  AC_DEFINE(STANDALONE, [1], [Run in a window])
fi

AC_OUTPUT([
Makefile
libtaku/Makefile
src/Makefile
])
